<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e293b">
    useMemo Hook - How It Works
  </text>
  
  <!-- Component renders flow -->
  <text x="50" y="80" font-size="16" font-weight="bold" fill="#374151">
    Component Re-renders:
  </text>
  
  <!-- Render 1 -->
  <g id="render1">
    <rect x="50" y="100" width="680" height="120" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="8"/>
    <text x="70" y="125" font-size="14" font-weight="bold" fill="#1e40af">
      First Render: amounts = [10, 20, 30]
    </text>
    
    <!-- useMemo box -->
    <rect x="70" y="140" width="300" height="60" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="6"/>
    <text x="85" y="160" font-size="12" fill="#92400e">
      useMemo(() => calculateTotal([10,20,30]), [amounts])
    </text>
    <text x="85" y="180" font-size="12" fill="#92400e">
      âœ“ Dependency changed â†’ Execute calculation
    </text>
    
    <!-- Arrow -->
    <path d="M 380 170 L 420 170" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Result -->
    <rect x="430" y="150" width="120" height="40" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="6"/>
    <text x="490" y="175" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">
      total = 60
    </text>
    
    <!-- Cache indication -->
    <text x="570" y="165" font-size="12" fill="#6b7280">
      ðŸ’¾ Cached!
    </text>
    <text x="570" y="180" font-size="12" fill="#6b7280">
      (stored in memory)
    </text>
  </g>
  
  <!-- Render 2 -->
  <g id="render2">
    <rect x="50" y="240" width="680" height="120" fill="#fef2f2" stroke="#ef4444" stroke-width="2" rx="8"/>
    <text x="70" y="265" font-size="14" font-weight="bold" fill="#dc2626">
      Second Render: amounts = [10, 20, 30] (same values!)
    </text>
    
    <!-- useMemo box -->
    <rect x="70" y="280" width="300" height="60" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="6"/>
    <text x="85" y="300" font-size="12" fill="#92400e">
      useMemo(() => calculateTotal([10,20,30]), [amounts])
    </text>
    <text x="85" y="320" font-size="12" fill="#92400e">
      âœ— Dependency unchanged â†’ Skip calculation
    </text>
    
    <!-- Arrow -->
    <path d="M 380 310 L 420 310" stroke="#6b7280" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-gray)"/>
    
    <!-- Result from cache -->
    <rect x="430" y="290" width="120" height="40" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="6"/>
    <text x="490" y="315" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">
      total = 60
    </text>
    
    <!-- Cache indication -->
    <text x="570" y="305" font-size="12" fill="#22c55e">
      âš¡ From Cache!
    </text>
    <text x="570" y="320" font-size="12" fill="#22c55e">
      (no recalculation)
    </text>
  </g>
  
  <!-- Render 3 -->
  <g id="render3">
    <rect x="50" y="380" width="680" height="120" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="8"/>
    <text x="70" y="405" font-size="14" font-weight="bold" fill="#1e40af">
      Third Render: amounts = [15, 25, 35] (different values!)
    </text>
    
    <!-- useMemo box -->
    <rect x="70" y="420" width="300" height="60" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="6"/>
    <text x="85" y="440" font-size="12" fill="#92400e">
      useMemo(() => calculateTotal([15,25,35]), [amounts])
    </text>
    <text x="85" y="460" font-size="12" fill="#92400e">
      âœ“ Dependency changed â†’ Execute calculation
    </text>
    
    <!-- Arrow -->
    <path d="M 380 450 L 420 450" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- New result -->
    <rect x="430" y="430" width="120" height="40" fill="#dcfce7" stroke="#22c55e" stroke-width="2" rx="6"/>
    <text x="490" y="455" text-anchor="middle" font-size="14" font-weight="bold" fill="#166534">
      total = 75
    </text>
    
    <!-- Cache update -->
    <text x="570" y="445" font-size="12" fill="#6b7280">
      ðŸ’¾ New Cache!
    </text>
    <text x="570" y="460" font-size="12" fill="#6b7280">
      (updated result)
    </text>
  </g>
  
  <!-- Key concept box -->
  <rect x="50" y="520" width="680" height="60" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="2" rx="8"/>
  <text x="70" y="545" font-size="16" font-weight="bold" fill="#0c4a6e">
    ðŸ”‘ Key Concept:
  </text>
  <text x="70" y="565" font-size="14" fill="#0c4a6e">
    useMemo only recalculates when dependencies in the array [amounts] change. Otherwise, it returns the cached result!
  </text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    <marker id="arrowhead-gray" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280"/>
    </marker>
  </defs>
</svg>